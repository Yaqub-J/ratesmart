(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[716],{6610:function(e,n,r){Promise.resolve().then(r.bind(r,6873))},6873:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return o}});var s=r(7437),t=r(7648),a=r(9376),i=r(2265),u=r(970);function o(){let[e,n]=(0,i.useState)(""),[r,o]=(0,i.useState)(""),[l,c]=(0,i.useState)(null),[d,h]=(0,i.useState)(!1),f=(0,a.useRouter)(),g=async n=>{n.preventDefault(),h(!0),c(null);try{let n=(0,u.e)(),{data:t,error:a}=await n.auth.signInWithPassword({email:e,password:r});if(a)throw a;if(t.user){var s;let{data:e,error:r}=await n.from("businesses").select("*").eq("user_id",t.user.id).single();if(r){console.error("Business profile error:",r),f.push("/dashboard/business/new");return}localStorage.setItem("business",JSON.stringify(e)),localStorage.setItem("loggedInBusiness",JSON.stringify(e));let a=null===(s=t.user.user_metadata)||void 0===s?void 0:s.role;"admin"===a?f.push("/admin"):f.push("/dashboard")}}catch(e){console.error("Login error:",e),c(e.message||"Invalid email or password \uD83D\uDEA8")}finally{h(!1)}};return(0,s.jsx)("div",{className:"login-container",children:(0,s.jsxs)("form",{className:"login-form",onSubmit:g,children:[(0,s.jsx)("h2",{children:"Business Login "}),l&&(0,s.jsx)("p",{className:"error",children:l}),(0,s.jsx)("input",{type:"email",name:"email",placeholder:"Email ",required:!0,value:e,onChange:e=>n(e.target.value)}),(0,s.jsx)("input",{type:"password",name:"password",placeholder:"Password ",required:!0,value:r,onChange:e=>o(e.target.value)}),(0,s.jsx)("button",{type:"submit",disabled:d,children:d?"Logging in... ":"Login "}),(0,s.jsxs)("p",{className:"login-link",children:["Don't have an account?"," ",(0,s.jsx)(t.default,{href:"/auth/register",children:(0,s.jsx)("span",{children:"Sign Up "})})]})]})})}},970:function(e,n,r){"use strict";r.d(n,{e:function(){return a}});var s=r(1388),t=r(257);function a(){return(0,s.createBrowserClient)(t.env.NEXT_PUBLIC_SUPABASE_URL,t.env.NEXT_PUBLIC_SUPABASE_ANON_KEY)}},7648:function(e,n,r){"use strict";r.d(n,{default:function(){return t.a}});var s=r(2972),t=r.n(s)}},function(e){e.O(0,[441,972,971,117,744],function(){return e(e.s=6610)}),_N_E=e.O()}]);