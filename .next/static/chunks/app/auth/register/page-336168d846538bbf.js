(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[454],{7158:function(e,a,t){Promise.resolve().then(t.bind(t,1998))},1998:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return o}});var n=t(7437),s=t(7648),r=t(9376),u=t(2265),i=t(970);let l={Nigeria:["Lagos","Abuja","Kano","Rivers","Oyo"],Ghana:["Accra","Kumasi","Tamale","Takoradi","Sunyani"],Kenya:["Nairobi","Mombasa","Kisumu","Nakuru","Eldoret"]};function o(){let[e,a]=(0,u.useState)(""),[t,o]=(0,u.useState)(""),[d,c]=(0,u.useState)(""),[h,p]=(0,u.useState)(""),[g,m]=(0,u.useState)(""),[f,v]=(0,u.useState)(""),[S,x]=(0,u.useState)(""),[j,y]=(0,u.useState)(""),[b,N]=(0,u.useState)(""),[w,C]=(0,u.useState)(null),[D,A]=(0,u.useState)(!1),E=(0,r.useRouter)(),P=e=>{let a=/[A-Z]/.test(e),t=/[0-9]/.test(e);return e.length>=8&&a&&t},_=async a=>{if(a.preventDefault(),A(!0),C(null),!e||!t||!d||!h||!g||!f||!j||!b||!S){C("Please fill in all fields \uD83D\uDEA8"),A(!1);return}if(j!==b){C("Passwords do not match \uD83D\uDEA8"),A(!1);return}if(!P(j)){C("Password must be 8+ characters with uppercase and number \uD83D\uDEA8"),A(!1);return}if(!/^\S+@\S+\.\S+$/.test(d)){C("Please enter a valid email \uD83D\uDEA8"),A(!1);return}try{let a=(0,i.e)(),{data:n,error:s}=await a.auth.signUp({email:d,password:j,options:{data:{role:"business"}}});if(s)throw s;if(n.user){let{data:s,error:r}=await a.from("businesses").insert([{id:n.user.id,name:e,phone:t,email:d,country:h,state:g,hours:f,description:S,user_id:n.user.id}]).select().single();if(r)throw r;localStorage.setItem("business",JSON.stringify(s)),localStorage.setItem("loggedInBusiness",JSON.stringify(s)),n.session?E.push("/dashboard"):E.push("/auth/verify-email")}}catch(e){console.error("Signup error:",e),C(e.message||"Signup failed. Please try again. \uD83D\uDEA8")}finally{A(!1)}};return(0,n.jsx)("div",{className:"signup-container",children:(0,n.jsxs)("form",{className:"signup-form",onSubmit:_,children:[(0,n.jsx)("h2",{children:"Business Signup "}),w&&(0,n.jsx)("div",{className:"error-message",children:w}),(0,n.jsx)("input",{type:"text",name:"businessName",placeholder:"Business Name ",onChange:e=>a(e.target.value),value:e,required:!0}),(0,n.jsx)("input",{type:"tel",name:"phone",placeholder:"Phone Number ",onChange:e=>o(e.target.value),value:t,required:!0}),(0,n.jsx)("input",{type:"email",name:"email",placeholder:"Email ",onChange:e=>c(e.target.value),value:d,required:!0}),(0,n.jsxs)("select",{name:"country",value:h,onChange:e=>{p(e.target.value),m("")},required:!0,children:[(0,n.jsx)("option",{value:"",children:"Select Country "}),Object.keys(l).map(e=>(0,n.jsx)("option",{value:e,children:e},e))]}),(0,n.jsxs)("select",{name:"state",value:g,onChange:e=>m(e.target.value),required:!0,disabled:!h,children:[(0,n.jsx)("option",{value:"",children:"Select State "}),(l[h]||[]).map(e=>(0,n.jsx)("option",{value:e,children:e},e))]}),(0,n.jsx)("input",{type:"text",name:"openingHours",placeholder:"Opening Hours (e.g. 9AM - 5PM) ",onChange:e=>v(e.target.value),value:f,required:!0}),(0,n.jsx)("textarea",{name:"description",placeholder:"Business description... ",value:S,onChange:e=>x(e.target.value),required:!0,minLength:20}),(0,n.jsx)("input",{type:"password",name:"password",placeholder:"Password (min 8 characters with uppercase and number) ",onChange:e=>y(e.target.value),value:j,required:!0,minLength:8}),(0,n.jsx)("input",{type:"password",name:"confirmPassword",placeholder:"Confirm Password ",onChange:e=>N(e.target.value),value:b,required:!0,minLength:8}),(0,n.jsx)("button",{type:"submit",disabled:D,children:D?"Signing Up... ":"Sign Up "}),(0,n.jsxs)("p",{className:"login-link",children:["Already have an account? ",(0,n.jsx)(s.default,{href:"/auth/login",children:(0,n.jsx)("span",{children:"Login "})})]})]})})}},970:function(e,a,t){"use strict";t.d(a,{e:function(){return r}});var n=t(1388),s=t(257);function r(){return(0,n.createBrowserClient)(s.env.NEXT_PUBLIC_SUPABASE_URL,s.env.NEXT_PUBLIC_SUPABASE_ANON_KEY)}},7648:function(e,a,t){"use strict";t.d(a,{default:function(){return s.a}});var n=t(2972),s=t.n(n)}},function(e){e.O(0,[441,972,971,117,744],function(){return e(e.s=7158)}),_N_E=e.O()}]);