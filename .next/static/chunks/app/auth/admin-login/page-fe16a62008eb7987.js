(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[491],{4537:function(e,n,i){Promise.resolve().then(i.bind(i,7575))},7575:function(e,n,i){"use strict";i.r(n),i.d(n,{default:function(){return u}});var r=i(7437),t=i(7648),a=i(9376),s=i(2265),l=i(970);function u(){let[e,n]=(0,s.useState)(""),[i,u]=(0,s.useState)(""),[d,o]=(0,s.useState)(null),[c,m]=(0,s.useState)(!1),f=(0,a.useRouter)(),g=async n=>{n.preventDefault(),m(!0),o(null);try{let n=(0,l.e)(),{data:t,error:a}=await n.auth.signInWithPassword({email:e,password:i});if(a)throw a;if(t.user){var r;let e=null===(r=t.user.user_metadata)||void 0===r?void 0:r.role;if("admin"===e)localStorage.setItem("loggedInAdmin",JSON.stringify({id:t.user.id,email:t.user.email})),f.push("/admin");else{let{data:e,error:i}=await n.from("admins").select("*").eq("user_id",t.user.id).single();e?(localStorage.setItem("loggedInAdmin",JSON.stringify(e)),f.push("/admin")):o("Access denied. Admin privileges required.")}}}catch(e){console.error("Admin login error:",e),o("Invalid admin credentials!")}finally{m(!1)}};return(0,r.jsx)("div",{className:"admin-login-container",children:(0,r.jsxs)("form",{className:"admin-login-form",onSubmit:g,children:[(0,r.jsx)("h2",{children:"Admin Login"}),d&&(0,r.jsx)("p",{className:"error-message",children:d}),(0,r.jsx)("input",{type:"email",placeholder:"Admin Email",value:e,onChange:e=>n(e.target.value),required:!0}),(0,r.jsx)("input",{type:"password",placeholder:"Admin Password",value:i,onChange:e=>u(e.target.value),required:!0}),(0,r.jsx)("button",{type:"submit",disabled:c,children:c?"Logging in...":"Login"}),(0,r.jsx)(t.default,{href:"/",children:(0,r.jsx)("p",{className:"back-link",children:"Not an admin? Go back to Homepage"})})]})})}},970:function(e,n,i){"use strict";i.d(n,{e:function(){return a}});var r=i(1388),t=i(257);function a(){return(0,r.createBrowserClient)(t.env.NEXT_PUBLIC_SUPABASE_URL,t.env.NEXT_PUBLIC_SUPABASE_ANON_KEY)}},7648:function(e,n,i){"use strict";i.d(n,{default:function(){return t.a}});var r=i(2972),t=i.n(r)}},function(e){e.O(0,[441,972,971,117,744],function(){return e(e.s=4537)}),_N_E=e.O()}]);