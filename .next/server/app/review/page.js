(()=>{var e={};e.id=672,e.ids=[672],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},2615:e=>{"use strict";e.exports=require("http")},5240:e=>{"use strict";e.exports=require("https")},8621:e=>{"use strict";e.exports=require("punycode")},6162:e=>{"use strict";e.exports=require("stream")},7360:e=>{"use strict";e.exports=require("url")},1568:e=>{"use strict";e.exports=require("zlib")},8154:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>p,originalPathname:()=>d,pages:()=>c,routeModule:()=>h,tree:()=>u}),r(6360),r(4403),r(996);var s=r(170),i=r(5002),a=r(3876),n=r.n(a),l=r(6299),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);r.d(t,o);let u=["",{children:["review",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,6360)),"/workspaces/ratesmart/app/review/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,4403)),"/workspaces/ratesmart/app/layout.tsx"],loading:[()=>Promise.resolve().then(r.bind(r,8199)),"/workspaces/ratesmart/app/loading.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,996,23)),"next/dist/client/components/not-found-error"]}],c=["/workspaces/ratesmart/app/review/page.tsx"],d="/review/page",p={require:r,loadChunk:()=>Promise.resolve()},h=new s.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/review/page",pathname:"/review",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:u}})},8334:(e,t,r)=>{Promise.resolve().then(r.bind(r,9715))},1814:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,3642,23)),Promise.resolve().then(r.t.bind(r,7586,23)),Promise.resolve().then(r.t.bind(r,7838,23)),Promise.resolve().then(r.t.bind(r,8057,23)),Promise.resolve().then(r.t.bind(r,7741,23)),Promise.resolve().then(r.t.bind(r,3118,23))},8762:()=>{},5303:()=>{},9715:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l});var s=r(7247),i=r(4178),a=r(8964),n=r(5014);function l(){let e=(0,i.useRouter)(),[t,r]=(0,a.useState)(""),[l,o]=(0,a.useState)([]),[u,c]=(0,a.useState)([]),[d,p]=(0,a.useState)(null),[h,m]=(0,a.useState)([]),[x,v]=(0,a.useState)(""),[g,j]=(0,a.useState)(""),[b,f]=(0,a.useState)(""),[w,P]=(0,a.useState)(0),[_,S]=(0,a.useState)(!1),y=async e=>{p(e),r(""),c([]);try{let t=(0,n.e)(),{data:r,error:s}=await t.from("products").select("*").eq("business_id",e.id);if(s){console.error("Error fetching products:",s);return}m(r||[])}catch(e){console.error("Error fetching products:",e)}},N=async()=>{if(!x||!g||!b||!w){alert("Please complete all fields.");return}S(!0);try{let t=(0,n.e)(),r=h.find(e=>e.name===g);if(!r){alert("Selected product not found.");return}let{error:s}=await t.from("reviews").insert([{business_id:d.id,product_id:r.id,customer_name:x,text:b,rating:w,sentiment:null,is_fake:!1,reply:null}]);if(s)throw s;e.push("/thank-you")}catch(e){console.error("Error submitting review:",e),alert("Error submitting review. Please try again.")}finally{S(!1)}};return(0,s.jsxs)("div",{className:"review-page",children:[s.jsx("h1",{children:"Leave a Review"}),!d&&(0,s.jsxs)(s.Fragment,{children:[s.jsx("input",{type:"text",placeholder:"Search for a business...",value:t,onChange:e=>{let t=e.target.value;r(t),""===t.trim()?c([]):c(l.filter(e=>e.name.toLowerCase().includes(t.toLowerCase())))},className:"search-input"}),""!==t.trim()&&u.length>0&&s.jsx("div",{className:"business-list",children:u.map((e,t)=>(0,s.jsxs)("div",{className:"business-item",onClick:()=>y(e),children:[s.jsx("strong",{children:e.name})," - ",e.country,", ",e.state]},t))}),""!==t.trim()&&0===u.length&&s.jsx("p",{children:"No businesses found. \uD83D\uDE1E"})]}),d&&(0,s.jsxs)("div",{className:"review-form",children:[(0,s.jsxs)("h2",{children:["Reviewing: ",d.name]}),(0,s.jsxs)("table",{className:"review-table",children:[s.jsx("thead",{children:(0,s.jsxs)("tr",{children:[s.jsx("th",{children:"Customer Name"}),s.jsx("th",{children:"Product"}),s.jsx("th",{children:"Review"}),s.jsx("th",{children:"Rating"})]})}),s.jsx("tbody",{children:(0,s.jsxs)("tr",{children:[s.jsx("td",{children:s.jsx("input",{type:"text",value:x,onChange:e=>v(e.target.value),placeholder:"Your name"})}),s.jsx("td",{children:(0,s.jsxs)("select",{value:g,onChange:e=>j(e.target.value),children:[s.jsx("option",{value:"",children:"-- Select Product --"}),h.map((e,t)=>s.jsx("option",{value:e.name,children:e.name},t))]})}),s.jsx("td",{children:s.jsx("textarea",{value:b,onChange:e=>f(e.target.value),placeholder:"Write your review..."})}),s.jsx("td",{children:s.jsx("div",{className:"star-rating",children:[1,2,3,4,5].map(e=>s.jsx("span",{className:e<=w?"filled":"",onClick:()=>P(e),children:"â˜…"},e))})})]})})]}),s.jsx("button",{onClick:N,className:"submit-btn",disabled:_,children:_?"Submitting Review...":"Submit Review"})]})]})}},5014:(e,t,r)=>{"use strict";r.d(t,{e:()=>i});var s=r(313);function i(){return(0,s.createBrowserClient)(process.env.NEXT_PUBLIC_SUPABASE_URL,process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY)}},4403:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c,metadata:()=>u});var s=r(2051),i=r(1563),a=r.n(i),n=r(761),l=r.n(n),o=r(6269);r(7272);let u={title:"RateSmart - Business Review Platform",description:"Discover and review local businesses with AI-powered insights",generator:"v0.app"};function c({children:e}){return s.jsx("html",{lang:"en",children:s.jsx("body",{className:`font-sans ${a().variable} ${l().variable}`,children:s.jsx(o.Suspense,{fallback:null,children:e})})})}},8199:(e,t,r)=>{"use strict";function s(){return null}r.r(t),r.d(t,{default:()=>s})},6360:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(5347).createProxy)(String.raw`/workspaces/ratesmart/app/review/page.tsx#default`)},7272:()=>{}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[787,678,432],()=>r(8154));module.exports=s})();