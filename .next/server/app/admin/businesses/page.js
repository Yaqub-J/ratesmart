(()=>{var e={};e.id=603,e.ids=[603],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},2615:e=>{"use strict";e.exports=require("http")},5240:e=>{"use strict";e.exports=require("https")},8621:e=>{"use strict";e.exports=require("punycode")},6162:e=>{"use strict";e.exports=require("stream")},7360:e=>{"use strict";e.exports=require("url")},1568:e=>{"use strict";e.exports=require("zlib")},8165:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>n.a,__next_app__:()=>h,originalPathname:()=>u,pages:()=>o,routeModule:()=>v,tree:()=>l}),t(2611),t(4403),t(996);var r=t(170),a=t(5002),i=t(3876),n=t.n(i),d=t(6299),c={};for(let e in d)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>d[e]);t.d(s,c);let l=["",{children:["admin",{children:["businesses",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,2611)),"/workspaces/ratesmart/app/admin/businesses/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.t.bind(t,893,23)),"/workspaces/ratesmart/app/admin/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,4403)),"/workspaces/ratesmart/app/layout.tsx"],loading:[()=>Promise.resolve().then(t.bind(t,8199)),"/workspaces/ratesmart/app/loading.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,996,23)),"next/dist/client/components/not-found-error"]}],o=["/workspaces/ratesmart/app/admin/businesses/page.tsx"],u="/admin/businesses/page",h={require:t,loadChunk:()=>Promise.resolve()},v=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/admin/businesses/page",pathname:"/admin/businesses",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},7238:(e,s,t)=>{Promise.resolve().then(t.bind(t,2378)),Promise.resolve().then(t.t.bind(t,4080,23))},1814:(e,s,t)=>{Promise.resolve().then(t.t.bind(t,3642,23)),Promise.resolve().then(t.t.bind(t,7586,23)),Promise.resolve().then(t.t.bind(t,7838,23)),Promise.resolve().then(t.t.bind(t,8057,23)),Promise.resolve().then(t.t.bind(t,7741,23)),Promise.resolve().then(t.t.bind(t,3118,23))},8762:()=>{},5303:()=>{},2378:(e,s,t)=>{"use strict";t.d(s,{BusinessActions:()=>v});var r=t(7247),a=t(8964),i=t(2767),n=t(5014),d=t(4178),c=t(7013),l=t(8799),o=t(6323);let u=(0,o.Z)("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),h=(0,o.Z)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);function v({business:e}){let[s,t]=(0,a.useState)(!1),o=(0,d.useRouter)(),v=async()=>{t(!0);let s=(0,n.e)(),{error:r}=await s.from("businesses").update({is_verified:!e.is_verified}).eq("id",e.id);r||o.refresh(),t(!1)},x=async()=>{t(!0);let s=(0,n.e)(),{error:r}=await s.from("businesses").update({is_active:!e.is_active}).eq("id",e.id);r||o.refresh(),t(!1)};return(0,r.jsxs)("div",{className:"flex space-x-2",children:[r.jsx(i.z,{variant:e.is_verified?"outline":"default",size:"sm",onClick:v,disabled:s,children:e.is_verified?(0,r.jsxs)(r.Fragment,{children:[r.jsx(c.Z,{className:"h-4 w-4 mr-1"}),"Unverify"]}):(0,r.jsxs)(r.Fragment,{children:[r.jsx(l.Z,{className:"h-4 w-4 mr-1"}),"Verify"]})}),r.jsx(i.z,{variant:e.is_active?"destructive":"default",size:"sm",onClick:x,disabled:s,children:e.is_active?(0,r.jsxs)(r.Fragment,{children:[r.jsx(u,{className:"h-4 w-4 mr-1"}),"Deactivate"]}):(0,r.jsxs)(r.Fragment,{children:[r.jsx(h,{className:"h-4 w-4 mr-1"}),"Activate"]})})]})}},2767:(e,s,t)=>{"use strict";t.d(s,{z:()=>c});var r=t(7247);t(8964);var a=t(9008),i=t(7972),n=t(5008);let d=(0,i.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function c({className:e,variant:s,size:t,asChild:i=!1,...c}){let l=i?a.g7:"button";return r.jsx(l,{"data-slot":"button",className:(0,n.cn)(d({variant:s,size:t,className:e})),...c})}},5014:(e,s,t)=>{"use strict";t.d(s,{e:()=>a});var r=t(313);function a(){return(0,r.createBrowserClient)(process.env.NEXT_PUBLIC_SUPABASE_URL,process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY)}},5008:(e,s,t)=>{"use strict";t.d(s,{cn:()=>i});var r=t(1929),a=t(5770);function i(...e){return(0,a.m6)((0,r.W)(e))}},8799:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});let r=(0,t(6323).Z)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},7013:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});let r=(0,t(6323).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},2611:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>p});var r=t(2051),a=t(6660),i=t(1288),n=t(6669),d=t(353),c=t(8300),l=t(8765),o=t(9909),u=t(6610),h=t(8824),v=t(4663),x=t(2349);let m=(0,t(5347).createProxy)(String.raw`/workspaces/ratesmart/components/admin/business-actions.tsx#BusinessActions`);async function p(){let e=await (0,a.e)(),{data:s,error:t}=await e.auth.getUser();(t||!s?.user)&&(0,i.redirect)("/auth/login");let{data:p}=await e.from("users").select("role").eq("id",s.user.id).single();p?.role!=="admin"&&(0,i.redirect)("/dashboard");let{data:g}=await e.from("businesses").select(`
      *,
      users!businesses_owner_id_fkey (
        full_name,
        email
      ),
      business_stats (
        total_reviews,
        average_rating,
        total_fake_reviews
      )
    `).order("created_at",{ascending:!1});return(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[r.jsx("header",{className:"bg-white border-b",children:(0,r.jsxs)("div",{className:"container mx-auto px-4 py-4 flex items-center space-x-4",children:[r.jsx(x.default,{href:"/admin",children:(0,r.jsxs)(c.z,{variant:"ghost",size:"sm",children:[r.jsx(l.Z,{className:"h-4 w-4 mr-2"}),"Back to Admin"]})}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[r.jsx(o.Z,{className:"h-6 w-6 text-blue-600"}),r.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Manage Businesses"})]})]})}),(0,r.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,r.jsxs)("div",{className:"mb-6",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"All Businesses"}),r.jsx("p",{className:"text-gray-600",children:"Review, verify, and manage business listings"})]}),g&&g.length>0?r.jsx("div",{className:"space-y-4",children:g.map(e=>{let s=e.business_stats?.[0],t=e.users;return(0,r.jsxs)(n.Zb,{children:[r.jsx(n.Ol,{children:(0,r.jsxs)("div",{className:"flex items-start justify-between",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[r.jsx(n.ll,{className:"text-xl",children:e.name}),r.jsx(d.C,{variant:"secondary",children:e.category}),e.is_verified?r.jsx(d.C,{className:"bg-green-100 text-green-800",children:"Verified"}):r.jsx(d.C,{variant:"outline",children:"Unverified"}),!e.is_active&&r.jsx(d.C,{variant:"destructive",children:"Inactive"})]}),(0,r.jsxs)("div",{className:"grid md:grid-cols-2 gap-4 text-sm text-gray-600",children:[(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[r.jsx(u.Z,{className:"h-4 w-4"}),r.jsx("span",{children:e.address})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[r.jsx(h.Z,{className:"h-4 w-4"}),(0,r.jsxs)("span",{children:["Added ",new Date(e.created_at).toLocaleDateString()]})]})]}),(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsxs)("div",{children:["Owner: ",t?.full_name||"Unknown"]}),(0,r.jsxs)("div",{children:["Email: ",t?.email||"Unknown"]})]})]}),e.description&&r.jsx(n.SZ,{className:"mt-3 line-clamp-2",children:e.description})]}),r.jsx("div",{className:"ml-4 text-right",children:s&&(0,r.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-1",children:[r.jsx(v.Z,{className:"h-4 w-4 text-yellow-400 fill-current"}),r.jsx("span",{className:"font-medium",children:s.average_rating}),(0,r.jsxs)("span",{className:"text-gray-600",children:["(",s.total_reviews,")"]})]}),s.total_fake_reviews>0&&(0,r.jsxs)("div",{className:"text-red-600 font-medium",children:[s.total_fake_reviews," fake reviews"]})]})})]})}),r.jsx(n.aY,{children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex space-x-2",children:[r.jsx(x.default,{href:`/business/${e.id}`,children:r.jsx(c.z,{variant:"outline",size:"sm",children:"View Public"})}),r.jsx(x.default,{href:`/admin/businesses/${e.id}`,children:r.jsx(c.z,{variant:"outline",size:"sm",children:"View Details"})})]}),r.jsx(m,{business:e})]})})]},e.id)})}):r.jsx(n.Zb,{className:"text-center py-12",children:(0,r.jsxs)(n.aY,{children:[r.jsx(o.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),r.jsx(n.ll,{className:"text-xl mb-2",children:"No Businesses Found"}),r.jsx(n.SZ,{children:"No businesses have been registered yet."})]})})]})]})}},893:()=>{},4403:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>o,metadata:()=>l});var r=t(2051),a=t(1563),i=t.n(a),n=t(761),d=t.n(n),c=t(6269);t(7272);let l={title:"RateSmart - Business Review Platform",description:"Discover and review local businesses with AI-powered insights",generator:"v0.app"};function o({children:e}){return r.jsx("html",{lang:"en",children:r.jsx("body",{className:`font-sans ${i().variable} ${d().variable}`,children:r.jsx(c.Suspense,{fallback:null,children:e})})})}},8199:(e,s,t)=>{"use strict";function r(){return null}t.r(s),t.d(s,{default:()=>r})},353:(e,s,t)=>{"use strict";t.d(s,{C:()=>c});var r=t(2051);t(6269);var a=t(6734),i=t(9666),n=t(7170);let d=(0,i.j)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function c({className:e,variant:s,asChild:t=!1,...i}){let c=t?a.g7:"span";return r.jsx(c,{"data-slot":"badge",className:(0,n.cn)(d({variant:s}),e),...i})}},8300:(e,s,t)=>{"use strict";t.d(s,{z:()=>c});var r=t(2051);t(6269);var a=t(6734),i=t(9666),n=t(7170);let d=(0,i.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function c({className:e,variant:s,size:t,asChild:i=!1,...c}){let l=i?a.g7:"button";return r.jsx(l,{"data-slot":"button",className:(0,n.cn)(d({variant:s,size:t,className:e})),...c})}},6669:(e,s,t)=>{"use strict";t.d(s,{Ol:()=>n,SZ:()=>c,Zb:()=>i,aY:()=>l,ll:()=>d});var r=t(2051);t(6269);var a=t(7170);function i({className:e,...s}){return r.jsx("div",{"data-slot":"card",className:(0,a.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...s})}function n({className:e,...s}){return r.jsx("div",{"data-slot":"card-header",className:(0,a.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...s})}function d({className:e,...s}){return r.jsx("div",{"data-slot":"card-title",className:(0,a.cn)("leading-none font-semibold",e),...s})}function c({className:e,...s}){return r.jsx("div",{"data-slot":"card-description",className:(0,a.cn)("text-muted-foreground text-sm",e),...s})}function l({className:e,...s}){return r.jsx("div",{"data-slot":"card-content",className:(0,a.cn)("px-6",e),...s})}},6660:(e,s,t)=>{"use strict";t.d(s,{e:()=>i});var r=t(9608),a=t(2845);async function i(){let e=await (0,a.cookies)();return(0,r.createServerClient)(process.env.NEXT_PUBLIC_SUPABASE_URL,process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY,{cookies:{getAll:()=>e.getAll(),setAll(s){try{s.forEach(({name:s,value:t,options:r})=>e.set(s,t,r))}catch{}}}})}},7170:(e,s,t)=>{"use strict";t.d(s,{cn:()=>i});var r=t(6272),a=t(1472);function i(...e){return(0,a.m6)((0,r.W)(e))}},8765:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});let r=(0,t(6449).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},9909:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});let r=(0,t(6449).Z)("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]])},8824:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});let r=(0,t(6449).Z)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},6610:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});let r=(0,t(6449).Z)("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},7272:()=>{}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[787,678,432,80,598,181,417,637],()=>t(8165));module.exports=r})();